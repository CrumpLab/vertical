---
title: "Get started using vertical"
bibliography: tutorial.bib
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting Started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Motivation

`vertical` is an R-based structured workflow for creating and sharing resarch assets in the form of an extended R package. There are several reasons why the R package format is useful for sharing a variety of research assets (from experiment scripts, to papers, slides and posters).

1. R packages have a standardized and well-organized file-structure that is useful for organizational purposes.
2. Researchers often develop custom functions for analysis, and putting them in an R package makes sharing the functions easy.
3. R packages can include data from a research project, and a natural way to document the data using the same schemes for documenting R functions.
4. R packages include various documents through the vignettes folder, which in principle could include various formats for communicating research, such as a manuscript or slide deck written in RMarkdown.
5. R packages can be automatically rendered into websites through `pkgdown`, providing a compelling format for sharing research assets. 

## Install vertical

`vertical` requires an installation of `devtools`

```
install.packages("devtools")
```

Then, run the following to install `vertical`.

```
devtools::install_github("CrumpLab/vertical")
```

# Overview

Vertical combines the benefits of two R ecosystems for creating and sharing research project assets, these include the ecosystems of R Markdown and R packages. So vertical is:

```{r, eval=FALSE}
vertical <- RMarkdown + RPackages
```

R Markdown is a plain text document format that, 1) allows regular text to be combined with chunks of code, and 2) can be compiled to multiple output formats, such as .pdf and webpages (HTML). R Markdown offers a strategy for transparent and reproducible research because analysis scripts along with their output (e.g., results and figures), can be embedded directly in a document. R Markdown has become a large ecosystem and is capable of several forms of document creation, from journal articles, to posters and slide-decks, and much more. In general, if R Markdown is used to create a research asset, it can be included in a `vertical` project with ease. A comprehensive manual for all things R Markdown [@xie2018] is available here <https://bookdown.org/yihui/rmarkdown/>. 

R Packages are a standard for creating and sharing libraries of R functions. By default, R packages can also include data and R Markdown documents, so the format is already suitable for packaging common research assets such as functions, data, and manuscripts. R Packages are an ecosystem in that several R Packages exist to facilitate the process of creating and sharing R packages, such as [usethis](https://usethis.r-lib.org) [@usethis], [pkgdown](https://pkgdown.r-lib.org) [@pkgdown], and [devtools](https://devtools.r-lib.org) [@devtools]. Furthermore, `pkgdown` provides a method to automatically render an R package into a website that displays function documentation as well as R Markdown documents (typically tutorials for using the package). We refer readers to Wickham [-@wickham_r_2015] for an authoritative and in-depth guide on creating R packages [http://r-pkgs.had.co.nz](http://r-pkgs.had.co.nz).

`vertical` is a template for extending R Packages and pkgdown websites to include additional assets common to psychological research projects. To appreciate the extension consider the basic skeleton for building an R package that is generated by RStudio.

```{r, out.width="100%", echo=FALSE}
knitr::include_graphics("imgs/r-package-skeleton.png")
```

In the minimal example, RStudio is used to create a new project by choosing the R package template. The new project is populated with DESCRIPTION and NAMESPACE files, an R folder to write .R functions, and a man folder to write .Rd files for function documentation. RStudio automatically recognizes the project as an R package, and provides a build tab in the IDE to install the package. A pkgdown website can be built by one command `pkgdown::build_site()`.

## vertical workflow

Installing the `vertical` package adds a new project template to RStudio (RStudio should be restarted after `vertical` is installed so that it recognizes the template). Users can initiate a new vertical project from RStudio by choosing the vertical project option when creating a new project. By default a vertical project is structured in the following manner:

```{r, out.width="100%", echo=FALSE}
knitr::include_graphics("imgs/vertical-project.png")
```

The new project contains a more complete skeleton of an R package (e.g., folders for data-raw, data, and vignettes), `_pkgdown.yml` for controlling website parameters when rendered with `pkgdown`, and additional folders for research project assets such as `experiments`, `manuscript`, `model`, `posters`, and `slides`. These additional folder can simply be locations to store final products (e.g., a .zip file for experiment scripts, a .pdf for the manuscript, powerpoint for the slides,e tc.); however, each of these assets can also be created as R Markdown documents. So, by default `vertical` includes R Markdown templates from other packages within each folder for building each type of content. As a result, `vertical` suggests using R as a single-platform solution stack for research asset creation.

## vertical website

A major impetus behind `vertical` is to facilitate sharing of research assets. For example, the benefit of using a `vertical` workflow is that a website presenting all of the research assets can be automatically rendered through `pkgdown`. For example, the figure below shows a `vertical` project website, with example page content shown in the boxes.

```{r, out.width="100%", echo=FALSE}
knitr::include_graphics("imgs/vertical-website.png")
```

Once content has been created in each of the folders, or a subset of them, the website can be rendered in one call using `vertical::build_vertical()`.

Depending on the nature of the research project, a vertical website is capable of sharing several assets. At a minimum, the landing page can be used to overview the research project. The navigiation bar can be used to download a .pdf of the manuscript, as well as posters and slides. Supplementary materials can be written in R markdown and displayed directly on the website. Similarly, model code and supplementary data analyses can be included directly on the website. If the project includes as a browser-based behavioral experiment, in addition to sharing the source code for the experiment, a demonstration of the experiment can be run directly from the website. Finally, because a vertical website is powered by pkgdown, the website provides pages for R functions and data documentation.

## Sharing vertical on Github and OSF

There are several methods for sharing research assets as online repositories, for example using Github or a project on the [open science framework](https://osf.io) (OSF). `vertical` is built with Github and OSF integration in mind, however a `vertical` project could in principle be shared in any repository. 

Github is very convenient for sharing `vertical` projects for several reasons:


1. R packages stored on Github repositories can be installed using `devtools`. `vertical` projects may contain R packages, so Github is useful for allowing others to install the package from their R console.
2. `pkgdown` websites assume Github integration, and compiles the website source code into the `docs` folder. The same occurs in a vertical project. Github repositories have the option to display a website through Github pages (activated in the repository settings), which serves any content in a repository `docs` folder as a static website (the url for the website is shown in the settings page after github pages is activated). So, Github provides a convenient and free method to share a `vertical` website.
3. RStudio supports git version control, so a `vertical` project can be created as a git repository. Users unfamiliar with the benefits of version control inherit those benefits (and/or may learn about them) by activating them in a `vertical` project.
4. Research assets in psychological science are commonly shared on OSF, which among other things provides a digital object identifier for a project, and a persistent means of storing the assets. OSF provides Github integration, allowing the content of an OSF project to be automatically populated by the content of a linked Github repository.

# Tutorial

The following tutorial on `vertical` describes the creation of a vertical project, discussion of the vertical workflow for various types of content creation, rendering a vertical project website, and sharing vertical projects on Github and OSF. We attempt simple examples in each case, and refer readers to other guides for more in depth treatment when necessary.

## Creating a vertical project

[Install vertical](#install-vertical), restart RStudio, then follow these steps to initialize a new `vertical` project.

```{r, out.width="50%", echo=FALSE}
knitr::include_graphics("imgs/vertical-new.png")
```

## Default vertical template

By default, a fresh `vertical` project contains the following files and folder structure:

```{r, out.width="75%", echo=FALSE}
knitr::include_graphics("imgs/vertical-structure.png")
```

## Building the vertical website

A new `vertical` project is populated with template examples for every kind of content supported by vertical (e.g., R functions, manuscript, poster, slides, supplementary materials, and even writing a browser-based behavioral experiment with jspsych). As a result, an example vertical website (showing templated content) can be rendered immediately by running the following in the console:

```{r, eval=FALSE}
vertical::build_vertical()
```

The above line should save the HTML files for the website into the `docs` folder in the `vertical` template. Additionally, the resulting website should appear in a browser window for inspection. For expanded discussion on customizing the website see the [Website customization] section.

One caveat is the rendering of APA manuscripts with the `papaja` package, which requires a latex installation. More generally, when `vertical` is installed, it installs dependencies such as `papaja` and other required packages, but does not install latex (see, [APA papers with papaja]).

## R Packages

`vertical` projects can include an R package containing custom functions and data sets. This tutorial presents minimal examples for R package creation, and users interested in this functionality should consult Wickham's guide for creating R packages <http://r-pkgs.had.co.nz>.

We suggest avoiding a manual style for R package creation, which involves creating and modifying critical R package files by hand. Specifically, manual creation of files requires intimate familiarity with R standards for package development, which new users may not posess. Instead, we suggest users avail themselves of helper packages such as [usethis](https://usethis.r-lib.org), [pkgdown](https://pkgdown.r-lib.org), [devtools](https://devtools.r-lib.org), and [roxygen2](https://roxygen2.r-lib.org) for documenting functions and data. Wickham's guide provides in depth tutorials about R package creation using these tools.

To encourage the above method for R package creation, the vertical template also provides `Vertical Helper.R`, which contains example commands from the above packages for automating aspects of package creation.

## R package meta data

`vertical` creates a template for R package creation, including a DESCRIPTION file that is used to provide metadata about the R package. The default DESCRIPTION file looks something like this, and should be modified by the user to change the name, title, description and so on.

```
Package: verticaltemplate
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R: 
    person(given = "Matt",
           family = "Crump",
           role = c("aut", "cre"),
           email = "mcrump@brooklyn.cuny.edu",
           comment = c(ORCID = "0000-0002-5612-0090"))
Description: What the package does (one paragraph).
License: MIT + file LICENSE
Encoding: UTF-8
LazyData: true
Suggests: 
    rmarkdown
```

The Wickham guide discusses the role of the DESCRIPTION file in depth here: <http://r-pkgs.had.co.nz/description.html>. It is possible, through `usethis`, to set up defaults that autopopulate the DESCRIPTION with user information (for example, see [usethis setup](https://usethis.r-lib.org/articles/articles/usethis-setup.html)).

## Adding R functions

The following is an example of adding a new function to the R package in a vertical project. Some reminders of these steps are suggested in `Vertical Helper.R`.

New functions are added as .R files to the `R` folder. This can be automated by the following, which creates a new .R file inside the `R` folder, in this case with the name `myfunction.R`.

```{r, eval=FALSE}
# replace myfunction with your function name
usethis::use_r("myfunction")
```

In this example, we will write a function that sums the integers between a first and second value. To begin, we decide to name the function `sum_range`, and create the .R file by running:

```{r, eval=FALSE}
usethis::use_r("sum_range")
```

Next, the function is written in the newly created file `sum_range.R`. For example, the following is added, starting on line 1:

```{r, eval=FALSE}
sum_range <- function(min,max){
  return(sum(min:max))
}
```

We will use `roxygen2` style commenting to provide documentation for the function. The documention will be shown in the help menu when the package is installed, allow help for the function to be accessed from the console by `?sum_range`, and produce a webpage with the documentation when rendered by `pkgdown`. The alternative to `roxygen2` is to manually write an .Rd file in the `man` folder for the new function; `roxygen2` automates this process and allows the documentation to be added as comments in the .R file defining the function.

Make sure `roxygen2` is installed (using RStudio, or `install.packages('roxygen2')` from the console.). RStudio may need to restart to recognize `roxygen2`. Before proceeding activate `roxygen2` documentation in RStudio, under Tools > Project options..., and select the checkbox for roxygen documentation:

```{r, out.width="50%", echo=FALSE}
knitr::include_graphics("imgs/roxygen.png")
```

Next, a template for `roxygen2` comments can be automatically generated from within the .R file using the following steps:

```{r, out.width="100%", echo=FALSE}
knitr::include_graphics("imgs/roxygen-insert.png")
```

A guide for documenting functions with `roxygen2` is available here <http://r-pkgs.had.co.nz/man.html>. In our example, we modify the `roxygen2` skeleton like so:

```
#' Sum of an integer range
#'
#' @param min integer, a starting value
#' @param max integer, an ending value
#'
#' @return integer, the sum of the integers between min and max.
#' @export
#'
#' @examples
#' sum_range(min=1,max=10)

sum_range <- function(min,max){
  return(sum(min:max))
}
```

The last step is generate the .Rd file in the `man` folder, which is used to create the documentation. The .Rd file is generated automatically by `devtools::document()`, or by the RStudio macro `Ctrl/Cmd + Shift + D`. For example, a new `sum_range.Rd` file like the following is saved to the `man` folder. This should not be edited by hand.

```{r, out.width="50%", echo=FALSE}
knitr::include_graphics("imgs/new-rd.png")
```

## R package compilation

At this stage we have added a new R function to the R package skeleton, but have not yet compiled and installed the R package. The R package can be built and installed in one step by pressing "Install and Restart" from the Build tab in RStudio. After this step, the package is installed on the local system, it will be shown in the list of packages along with constituent function documentation. The functions in the package can be loaded using the `library()` command.

```{r, out.width="100%", echo=FALSE}
knitr::include_graphics("imgs/package-build.png")
```

Relatedly, pkgdown can be used at this point to render the function documentation to the website by `pkgdown::build_site()`.

```{r, out.width="75%", echo=FALSE}
knitr::include_graphics("imgs/pkgdown-build.png")
```

## Adding Data

Arbitary data can be included in an R Pacakge by placing R data files into a `data` folder. Importantly, data can be documented just like a function, which allows for clear and descriptive meta-data for the data object.

`vertical` does not create a `data` folder as a part of its template. This is to encourage useful strategies for data inclusion, which also automate the creation of the data folder when it is required. We begin with an example of including data from the R environment, and then discuss strategies for including data as a part of a reproducible research project.

R objects in the environment can be included as data in an R package. For example, the following generates a simple data frame in the R environment:

```{r}
mydf <- data.frame(a = 1:5,
                   b = 6:10,
                   c = c("A","B","C","D","E"))
```

The `mydf` data frame can be exported to an .Rda file and written to the `data` folder through `usethis`:

```{r, eval=FALSE}
usethis::use_data(mydf)
```

The above also creates the `data` folder if it does not already exist.

Next, documentation for the data is added by inlcuding a `data.R` file in the `R` folder. 

```{r, eval= FALSE}
usethis::use_r('data')
```

Finally, `roxygen2` comments are added to `data.R` to describe the data file. We recommend installing the `sinew` package which can generate a useful template for documenting R data objects. 

```{r, eval=FALSE}
library(sinew)
makeOxygen(mydf)
```

For example, the above generates the following template that can be copied copied to `data.R`.

```
#' @title DATASET_TITLE
#' @description DATASET_DESCRIPTION
#' @format A data frame with 5 rows and 3 variables:
#' \describe{
#'   \item{\code{a}}{integer COLUMN_DESCRIPTION}
#'   \item{\code{b}}{integer COLUMN_DESCRIPTION}
#'   \item{\code{c}}{integer COLUMN_DESCRIPTION} 
#'}
#' @details DETAILS
"mydf"
```

The template is then edited to describe the data object, such as:

```
#' @title mydf
#' @description example data frame
#' @format A data frame with 5 rows and 3 variables:
#' \describe{
#'   \item{\code{a}}{integer some numbers}
#'   \item{\code{b}}{integer some more numbers}
#'   \item{\code{c}}{character some letters} 
#'}
#' @details This dataset is an example.
"mydf"
```

Finally, the .Rd file is generated by `devtools::document()`, or by the RStudio macro `Ctrl/Cmd + Shift + D`. When the package is built it will now contain the included data and documentation for the data. The documentation will be added to the website when the site is rebuilt.

Importantly, whenever the package is loaded (e.g., `library(verticaltemplate)`), the included data becomes available just like the included functions. For example, the following would load the package, then load the included dataset to the environment.

```{r, eval=FALSE}
library(verticaltemplate)
mydf #loaded into environment from package
```

Finally, documentation for multiple data objects can be added to the `data.R` file. Insert a new line after the documentation for the first data object, then insert the roxygen comments for the next one.

We have discussed the operations for adding data to an R package. In the context of including data from a research project we have a few additional suggestions. `vertical` does create a `data-raw` folder as part of the template. This is a location to place raw data in any given format that can be imported to R, such as a .csv file, excel file, JSON file, SPSS file, or other file type.

It is very often the case that raw data must be pre-processed or wrangled from its raw form to another form required by functions for data-analysis. Pre-processing steps may also involve excluding aspects of the raw data, or imputing structure to the raw data. In the spirit of sharing reproducible research it is important to record and make transparent all pre-processing steps. In principle, the transformations of data along an analysis path can be preserved in a variety of locations, such as in R Markdown documents that contain the scripts for the transformation. `vertical` suggests that the `data-raw` folder is used a location to, 1) declare and conduct pre-processing steps, and 2) save the transformed raw data to the `data` folder if the intention is to include it in the R package.

For example, the `data-raw` folder contains `DATASET.R`, a mostly blank .R script. This script can be populated with the code necessary to import the raw data and transform it as needed to a desired form for further analysis. In other words, `DATASET.R` is a script that declares pre-processing steps. The script can also include usethis commands and sinew commands to output desired R objects to the data folder, and to write documentation for these objects. One benefit to this strategy is that transformed data (ready-for-analysis), can later be accessed by loading the package as a library. For example, R Markdown assets for writing a manuscript, poster, or slide deck that include data-analysis, can quickly load the data by calling the library.

## APA papers with papaja

APA-style manuscripts can be written in R Markdown using the fantastic [papaja](https://crsh.github.io/papaja_man/) package [@papaja]. The linked to documentation explains how to use `papaja`, and rather than repeat that information here, we briefly extol some virtures of `papaja`.

`vertical` includes a `papaja` template in the manuscript folder. Knitting the `manuscript.Rmd` in RStudio produces an APA-style manuscript as a .pdf. NOTE, a latex installation is required in order to knit to pdf, and see the `papaja` documentation for suggestions on installing latex (see also the `tinytex` R package which may be of some use for navigating latex installation issues). `vertical` also includes the resulting .pdf in its website as a downloadable file.

There are several benefits to using `papaja`. First, it is possible to create an entirely reproducible research manuscript. For example, all of the text and R code for data-analysis, modeling, and figure generation, can be included in the .Rmd file. Second, `papaja` includes many helpful functions (such as `apa_print()`) for automating the writing of results from an R object (e.g., the results of an ANOVA, t-test, or regression) to the manuscript. Third, `papaja` uses latex style citations which automatically create bibliographies. Finally, it is possible to export to latex and word documents (which may need some formatting by hand at the end). Finally, papaja also has convenient templates for responding to action letters during the review process.

## Posters and slide decks

R Markdown is a powerful document creation platform and can also be used to produce posters and slide decks that are common formats for communicating findings at conferences or seminars. `vertical` allows posters and slides to be included as part of the vertical project website. Furthermore, if `vertical` suggests templates for creating these assets in  R Markdown. For example, the posters folder includes a [posterdown](https://github.com/brentthorne/posterdown) template [@posterdown], and the slides folder includes a [slidy](https://bookdown.org/yihui/rmarkdown/slidy-presentation.html) template. Both produce browser-displayable content that can be included in the vertical website. The respective links point to documentation for making posters with posterdown and making slide decks with slidy. Additionally, the posters and slides folders can be populated with other templates (by the user) if other packages are preferred for making posters and slides in R markdown.

## Supplementary materials, model code, and arbitary R Markdown

R Markdown documents of almost any sort can be included in a `vertical` project. For example, supplementary materials and model code can be additional assets from a research project that can be included and shared. 

`vertical` relies on pkgdown to generate its website, and pkgdown automatically knits .Rmd files located in the `vignettes` folder, and displays them under an articles tab. `vertical` renames the articles tab to "supplementary materials", but the logic is the same. Arbitrary R Markdown documents for any purpose can be placed in the vignettes folder, and they will automatically be added to the supplementary materials tab on the `vertical` website. 

`vertical` also includes a `model` folder as a location to place code from a computational model. This folder is populated with a default R Markdown template. The content in that document should be edited and replaced the content necessary to describe the model, and perhaps conduct sample simulations. However, `pkgdown::build_site()` does not scrape folders beyond vignettes when knitting R Markdown documents. Instead, `vertical::build_vertical()` is used to as a wrapper to pkgdown, which also knits content in non-vignette folders, such as manuscript, slides, posters, and model. We discuss further options for customization in the [Website customization] section.

## Experiments with jspsych and jspsychr

Depending on the needs of the research project, it is also possible to create browser-ready behavioral experiments in RStudio. For example, `vertical` creates an `experiments` folder that contains a template for building experiments using the [jspsych](https://www.jspsych.org) javascript library [@de2015jspsych]. Currently, `vertical` makes two suggestions. First, when a `vertical` project is created, it downloads the newest version of the jspsych library to the experiments folder. `vertical` also suggests a [jspsychr](https://crumplab.github.io/jspsychr/) template. `jspsychr` is an R package that provides templates and examples for writing `jspsych` experiments in RStudio, using a combination of R Markdown and javascript. The `vertical` template example includes a basic Stroop task. For example, knitting the `index.Rmd` file produces the `index.html` file which can be run in a browser. In this case, because the experiment file is also an HTML file, it is possible to include a demonstration of running the experiment in the `vertical` website.

## Website customization

`vertical` is a minor extension to the `pkgdown` approach for rendering R package websites from an R package file structure. In general, the constraints placed on `pkgdown` websites in terms of style and content are also imposed on `vertical` websites. Some examples of current constraints are:

1. R Markdown documents placed in the vignettes folder are rendered in a style dictated by `pkgdown`. This allows consistent style across R package vignettes, and vertical inherits this style for any .Rmds in the vignettes folder.

2. The website contains a sidebar with information about "developers", as developers is a good name for authors of R packages. Unfortunately, this descriptor is hard-coded by pkgdown, so the html file would need to be edited by hand to include a different descriptor.

The benefits of adopting the `pkgdown` framework is that websites can be compiled in one command and are produced with consistent structure. In our view, the additions that vertical makes are reasonable add-ons to that structure. It is worth pointing out that all of the constraints imposed by pkgdown can be escaped by building a custom R markdown website, however `vertical` does not provide direction for that option.

Although `pkgdown` has constraints it is also fairly flexible. By default, `pkgdown` creates a simple website with a landing page (to describe the package), and articles tab to display vignettes, and a reference tab to display function documentation. For an in-depth guide to customizing a pkgdown websites, see the [pkgdown documentation](https://pkgdown.r-lib.org). `vertical` extends the basic website by modifying the tabs in the navigation bar, and pointing them to assets in vertical, such as those contained in manuscript, slides, posters, etc.

Much of the customization occurs by modifying the `_pkgdown.yml` file. The `vertical` template creates `_pkgdown.yml` which defines the appearance and order of navigation tabs and how they link to vertical assets.

Below is example yml for controlling the navigation tabs. The `structure` section defines the ordering and placement of tabs in the navbar. For example, home, manuscript, articles, slides, posters, experiments, and reference are all left-aligned, and the source code link to github is right aligned. Switching the order of the component listed under structure will change the order of the tab in the navbar.

Next is the list of components, which form individual tabs. The name of the component does not need to be the same as the text displayed in the tab. For example the manuscript component specifies its text attribute as "The paper (pdf)", which is the text shown in the manuscript tab. It is possible to list mutiple items in a tab drop-down menu (see the articles component).

```
navbar:
  structure:
    left:
    - home
    - manuscript
    - articles
    - slides
    - posters
    - experiments
    - reference
    right: github
  components:
    home:
      icon: fa-home fa-lg
      href: index.html
    manuscript:
      text: The paper (pdf)
      menu:
      - text: papaja pdf
        href: manuscript/manuscript.pdf
    articles:
      text: Supplementary
      menu:
      - text: Getting Started
        href: articles/Supplemental_1.html
      - text: ---------
      - text: model 1
        href: articles/model/model1.html
    posters:
      text: Posters
      href: posters/poster.html
    slides:
      text: Slides
      menu:
      - text: test presentation
        href: slides/slides.html
    experiments:
      text: Experiments
      menu:
      - text: Experiment 1
        href: experiments/Experiment 1/experiment/index.html
    reference:
      text: Functions
      href: reference/index.html
    github:
      text: source code
      icon: fa-lg fa-github
      href: https://github.com/CrumpLab/vertical_template
```

A new tab with any name can be added to the website by adding a new component to the yml file. At a minimum, the new component should specify a text attribute, which will be the name of the tab, and an href attribute, which refers to the location of the linked asset.

For example, consider the posters component. This generates a tab labelled "Posters", and clicking the tab loads and displays `poster.html`. Importantly, `poster.html` resides in the docs folder, inside the posters folder (docs/posters/poster.html). When referring to the location (href) of a file, it is not necessary to specify 'docs' in the yml, as that is the assumed parent folder. Any file in the docs folder can be linked to in this manner, even files that were not created by vertical. For example, if a .pdf from another source was created, it could be manually copied into the docs folder, and then linked to in the yml file. Building the website would then create a tab with a link to that file. NOTE: if the docs directory is cleaned, then any file not added by vertical would need to be added again manually. 

Last, the home portion of the yml controls information displayed on the right side bar of the landing page. For example, links could be replaced with links to an OSF repository, or a journal website with a published version of a paper.

```      
home:
  strip_header: true
  links:
    - text: A link to X
      href: some link
    - text: A link to Y
      href: another link
  Authors:
    - text: Author 1
    - text: Author 2
```

## Sharing a vertical project

`vertical` was created assuming [Github](https://github.com) and [open science framework](https://osf.io) (OSF) integration, which are both free ways to share a repository online. The open science framework is commonly used in psychological science to research assets, and it allows Github integration. For example, rather than uploading files to OSF manually, an OSF project can be pointed at a Github repository, which then populates the OSF project. OSF projects also provide digital object identifiers (DOI). So, to share a `vertical` project the major step is to copy a local `vertical` project to a repository on Github.com.

Github is a website for sharing repositories of code in a git format. Git is version control software that has many capabilities beyond the scope of this tutorial. By default, `vertical` creates a new project as a git repository, which makes it easy to upload (push) to Github. The following steps should be sufficient to share a vertical project on Github.


1. Sign up for a free account on Github.
2. There are lots of tools for using git and Github. For example, you could use RStudio for many of your needs. We suggest [downloading the Github Desktop application](https://desktop.github.com) (also free), which provides a simple point-and-click interface.
3. When your vertical project is ready for Github (e.g., it has been compiled, and the website loads as you would like it on your local computer), the remaining step is to push your local project to Github. You can do this easily with Github Desktop.
  - Open Github Desktop
  - Associate Github Desktop with your Github account in preferences
  - Choose the option to add a new repository
  - Navigate to the folder containing your vertical project, and add it
  - Choose the option to publish the repository on Github
  - Make sure the repository is not set to Private, otherwise you won't be able to share it (alternatively, you private repositories are also possible)
  - Publish the repository
4. To view the repository on Github, you can press the view on Github button from Github Desktop. 
5. You should now see your new repository on Github.
6. To enable the website, go to the settings for the repository. Scroll down and activate the Github Pages option, choosing the "docs" option. Wait a few seconds, and navigate to the url which should be displayed above the Github Pages section.
7. If everything worked properly, you should be viewing your vertical project website live on the web.

Once your Github repository is uploaded, you can head over to OSF to associate your repository with an OSF project.

If your vertical project contains an R package, then it can now be installed from Github. You might suggest the following on the landing page or readme file to give instruction on installing the package:

```
# Install the package by
install.packages("devtools")
devtools::install_github("githubuser/reponame")
```

In the above, your would replace "githubuser" with your Github username, and "reponame" with the name of your Github repository containing the R package.





<!--


## See an example

You can check out the project template that gets loaded by vertical here [https://github.com/CrumpLab/vertical_template](https://github.com/CrumpLab/vertical_template), and the resulting website that is generated by the template here [https://github.com/CrumpLab/vertical_template](https://crumplab.github.io/vertical_template/). 

If you want to use vertical (see the instructions below), you will basically be editing/modifying the pieces of the template to suite your research project, and then generating the website to share your research assets.



## Create a new vertical project




```{r, echo=FALSE}
twee <- function(path = getwd(), level = Inf) {
  
  fad <-
    list.files(path = path, recursive = TRUE,no.. = TRUE, include.dirs = TRUE)

  fad_split_up <- strsplit(fad, "/")

  too_deep <- lapply(fad_split_up, length) > level
  fad_split_up[too_deep] <- NULL
  
  jfun <- function(x) {
    n <- length(x)
    if(n > 1)
      x[n - 1] <- "|__"
    if(n > 2)
      x[1:(n - 2)] <- "   "
    x <- if(n == 1) c("-- ", x) else c("   ", x)
    x
  }
  fad_subbed_out <- lapply(fad_split_up, jfun)
  
  cat(unlist(lapply(fad_subbed_out, paste, collapse = "")), sep = "\n")
}
```

## Using vertical

Right now vertical is mainly a project template, so using it involves using the directory structure that is set up in your new project. The basic file structure of a vertical template is described below:

### Vertical file structure

```
-- _pkgdown.yml - controls for displaying the website
-- DESCRIPTION - describe your R package if you build one
-- docs
   |__Where all the website stuff goes
-- experiments
   |__Experiment scripts and demos
-- man
   |__Any function documentation
-- manuscript
   |__Your manuscript files (e.g., writing paper in papaja)
   |__draft_manuscript.pdf
   |__draft_manuscript.Rmd
   |__draft_manuscript.tex
   |__r-references.bib
-- NAMESPACE - for R packages
-- Package Helper.R - helpful scripts for controlling vertical input/output
-- R
   |__Any R functions you want to share
-- README.md - front page of the website
-- slides
   |__Slide decks written in R
-- vertical.Rproj - the R project
-- vignettes
   |__Supplementary materials that get rendered as vignettes
```

## R packages and pkgdown

The heavy lifting to build your vertical website is all done by `pkgdown`. `pkgdown` <https://pkgdown.r-lib.org> is an R package that builds a website for R package documentation.

When you load a vertical project, the template includes a skeleton for making R packages. If you do not want to share custom functions you do not need to make use of this feature. To avoid this feature **do not press Install and Restart under the build tab in R-studio**.

In order to compile the vertical template into a website, you need to first install `pkgdown`. After that you just need to run one command `build_site()`, and boom, you've got a website.

Check out the `Vertical Helper.R` file for example code to build the site. The relevant line is:

```{r, eval=FALSE}
pkgdown::build_site()
```

If you are going to wade into making an R package using vertical, then I highly recommend reading [http://r-pkgs.had.co.nz](http://r-pkgs.had.co.nz). And, pay attention to the `roxygen2` option for writing function documentation.

The `pkgdown`function automatically builds .rmd files in the vignettes folder, and any R function documentation, along with all of the html for the website, and puts all of that stuff into the docs folder. This is useful, because if you upload your whole vertical project to github (as a way to share everything), you can turn on the github pages option, and the website you generate will be served from that repo.

Additionally, there are several common actions that are performed when making R packages (e.g., steps required to make a new function). The `usethis` package is very helpful for automating some of these steps. Examples are included in the `Vertical Helper.R` file.

## APA manuscript

The `manuscript` folder contains an example APA paper written using the `papaja` package. This is written in R markdown and compiled to .pdf. The .pdf is then shared on the website. More information about writing APA papers with `papaja` can be found on the `papaja` documentation site <https://crsh.github.io/papaja_man/introduction.html>

Note: that the .pdf generated must be copied by hand into the manuscript folder in the docs folder...this step will be automated in a future version of vertical.

## slides

The `slides` folder contains an example slide deck using `slidy`. The slide deck is written in R markdown (.Rmd file), and also uses custom .css to change the style of the presentation from the default. To place the generated html for the slide presentation into the docs folder you can run, from the `Vertical Helper.R` script.

```{r, eval=FALSE}
# render slides to docs (for display on website)
vertical::render_folder_to_docs("slides")
```

The `slides` folder can also be considered as a placeholder for any slide deck. Use this folder to write your slide deck using your preferred method. If you use an R markdown approach, and that approach produces an html slide deck, then the generated html needs to be placed in the docs folder to be rendered on the website. Also, the yml needs to be edited to point to the location of slide files in the docs folder. If your method for producing slides involves powerpoint, or say a pdf file, those can be shared on the website as well by placing those files in the docs folder and editing the yml to link to them. As vertical improves, one plan is to provide functions that automate the process of file copying and yml editing.


## experiments

The experiments folder is a place where you can save and share your experiment scripts. If you have built an experiment that can run in a web-browser, then you can even share a demo of the experiment. 

Currently, this folder contains a zip file of the most recent release of jspsych, a javascript library for running web-based behavioral experiments .

For more information on using jsPysch, check out the jsPsych documentation <https://www.jspsych.org>.


## Hosting the site

1. running `build_site()` will compile almost everything needed for the webpage into the `docs` folder.
2. If all of the files are placed in a public Github repository (free), then the Github repository can serve the website using the Github pages feature (turn this on under settings for the repository, and choose serve from docs folder)
3. In general, any file that is in the docs folder will be served to web.
4. The files in the `slides`, `manuscript`, and `experiments` folders are not automatically compiled into .html by pkgdown. So, for now, to share content from those folders I manually copy each folder into the docs folder.
5. The structure and appearance of the website can be modified (e.g., the navbar) by editing the `_pkgdown.yml` file. For more information on editing the yml file, see the pkgdown documentation.

-->

# References



